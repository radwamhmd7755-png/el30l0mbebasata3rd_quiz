<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8" />
<title>Admin Panel</title>

<style>
body{
    font-family: Arial;
    background:#f6f6f6;
    padding:20px;
}

/* شاشة اللوجين */
#loginBox{
    display:flex;
    justify-content:center;
    align-items:center;
    height:90vh;
}

.box{
    background:white;
    padding:30px;
    border-radius:12px;
    text-align:center;
    box-shadow:0 0 10px rgba(0,0,0,.1);
}

input{
    padding:10px;
    margin-top:10px;
    width:200px;
}

button{
    padding:8px 15px;
    margin-top:10px;
    cursor:pointer;
}

/* جدول البيانات */
#adminPanel{
    display:none;
}

table{
    border-collapse: collapse;
    width:100%;
    background:white;
    margin-top:20px;
}

th,td{
    border:1px solid #ddd;
    padding:8px;
    text-align:center;
}

th{
    background:#eee;
}
</style>
</head>
<body>

<!-- شاشة الباسورد -->
<div id="loginBox">
    <div class="box">
        <h2>🔒 Admin Login</h2>
        <input type="password" id="pass" placeholder="الباسورد">
        <br>
        <button onclick="checkPass()">دخول</button>
    </div>
</div>

<!-- لوحة التحكم -->
<div id="adminPanel">
    <h2>📊 بيانات الممتحنين</h2>
    <button onclick="logout()">تسجيل خروج</button>

    <table id="dataTable">
        <tr>
            <th>الاسم</th>
            <th>الإيميل</th>
            <th>الإجابات</th>
        </tr>
    </table>
</div>

<script>
const PASSWORD = "7720";

/* تسجيل دخول */
function checkPass(){
    let val = document.getElementById("pass").value;

    if(val === PASSWORD){
        sessionStorage.setItem("admin","true");
        showPanel();
    }else{
        alert("الباسورد غلط ❌");
    }
}

/* إظهار لوحة الأدمن */
function showPanel(){
    document.getElementById("loginBox").style.display="none";
    document.getElementById("adminPanel").style.display="block";
    loadData();
}

/* تسجيل خروج */
function logout(){
    sessionStorage.removeItem("admin");
    location.reload();
}

/* تحميل البيانات */
function loadData(){
    let users = JSON.parse(localStorage.getItem("quizUsers")) || [];

    let table = document.getElementById("dataTable");

    users.forEach(u=>{
        let row = table.insertRow();

        row.insertCell(0).innerText = u.name;
        row.insertCell(1).innerText = u.email;
        row.insertCell(2).innerText = Array.isArray(u.answers) ? u.answers.join(", ") : u.answers;
    });
}

/* لو داخل قبل كده */
if(sessionStorage.getItem("admin")==="true"){
    showPanel();
}
</script>

</body>
</html>