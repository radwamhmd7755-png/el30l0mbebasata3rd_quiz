<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>لوحة إدارة الكويز</title>
<style>
body {
    font-family: Arial;
    direction: rtl;
    background: #f4f6f9;
    margin: 0;
}
.container {
    width: 95%;
    max-width: 1000px;
    margin: 30px auto;
    background: white;
    padding: 30px;
    border-radius: 10px;
    box-shadow: 0 0 15px rgba(0,0,0,0.1);
}
h2 {
    color: #1e88e5;
    text-align: center;
}
table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 20px;
}
th, td {
    border: 1px solid #ddd;
    padding: 10px;
    text-align: right;
}
th {
    background: #1e88e5;
    color: white;
}
tr:nth-child(even) {
    background: #f2f2f2;
}
</style>
</head>
<body>

<div class="container">
<h2>لوحة إدارة الكويز</h2>

<table id="resultsTable">
<tr>
    <th>الاسم</th>
    <th>الإيميل</th>
    <th>الإجابات</th>
</tr>
</table>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.9.0/firebase-app.js";
import { getFirestore, collection, getDocs } from "https://www.gstatic.com/firebasejs/12.9.0/firebase-firestore.js";

// Firebase config
const firebaseConfig = {
    apiKey: "AIzaSyBcf4nCYjw4dZsgvEQvpN_FuAB6GVjxPF0",
    authDomain: "el30l0mbebasataquiz.firebaseapp.com",
    projectId: "el30l0mbebasataquiz",
    storageBucket: "el30l0mbebasataquiz.firebasestorage.app",
    messagingSenderId: "1082727795398",
    appId: "1:1082727795398:web:d7b4689416e626f0aca5c7"
};

// Initialize Firebase
const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

// تحميل البيانات وعرضها
async function loadResults() {
    const querySnapshot = await getDocs(collection(db, "quizResults"));
    const table = document.getElementById("resultsTable");

    querySnapshot.forEach((doc) => {
        const data = doc.data();
        const row = table.insertRow();
        row.insertCell(0).innerText = data.name;
        row.insertCell(1).innerText = data.email;
        row.insertCell(2).innerText = data.answers.join(" | ");
    });
}

// استدعاء التحميل عند فتح الصفحة
loadResults();
</script>

</div>
</body>
</html>